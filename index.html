<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Happy Birthday</title>
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <style>
    :root{
      --overlay: rgba(0,0,0,0.35);
      --accent: #e91e63;
      --btn-grad1:#ff4d6d;
      --btn-grad2:#ff9966;
      --card-bg: rgba(255,255,255,0.92);
      --shadow-lg: 0 20px 45px rgba(0,0,0,0.45);
    }

      /* PAGE + BACKGROUND */
    body {
      margin: 0;
      padding: 0;
      /* FIX 1: remove overflow hidden so whole page visible */
      min-height: 100vh;
      display: flex;
      justify-content: center;
      align-items: flex-start; /* start so card doesn‚Äôt stick in middle only */
      background-attachment: fixed; /* FIX 2: keeps background fixed */
      font-family: 'Comic Sans MS', cursive, sans-serif;
      position: relative;
    }
    body::before{
      content:"";
      position: fixed;
      inset: 0;
      background: var(--overlay);
      z-index: 0;
    }

    /* CARD */
    .card {
  position: relative;
  z-index: 10;
  text-align: center;
  background: 
    linear-gradient(rgba(255,255,255,0.6), rgba(255,255,255,0.6)), 
    url("dipa.webp") center/cover no-repeat;
  padding: 44px 36px 28px;
  border-radius: 22px;
  box-shadow: var(--shadow-lg);
  animation: fadeIn 1.1s ease-out;
  max-width: 820px;
  width: calc(100% - 32px);
  backdrop-filter: blur(2px);
  margin: 40px auto;
}

    h1 {
      color: var(--accent);
      font-size: clamp(1.6rem, 3.2vw, 2.6rem);
      margin: 0 0 6px 0;
    }
    p.lead {
      font-size: clamp(1rem, 2.4vw, 1.25rem);
      color: #333;
      margin: 6px 0 14px 0;
    }

    /* COUNTUP */
    .countup{
      font-size: 1rem;
      color:#222;
      margin: 8px 0 16px 0;
    }
    .countup strong{ color:#111; }

    /* FLOATING QUOTE */
    .quote-wrap{
      position: relative;
      height: 34px;
      margin: 6px auto 8px;
      overflow: hidden;
    }
    .quote{
      position: absolute;
      left: 50%;
      transform: translateX(-50%);
      opacity: 0;
      font-size: 1.05rem;
      color:#444;
      white-space: nowrap;
      animation: quoteFade 30s linear infinite;
      padding: 2px 10px;
      border-radius: 999px;
      background: rgba(255,255,255,0.6);
      box-shadow: 0 6px 20px rgba(0,0,0,0.15);
    }
    @keyframes quoteFade{
      0%{opacity:0; transform: translateX(-50%) translateY(10px);}
      5%{opacity:1; transform: translateX(-50%) translateY(0);}
      90%{opacity:1;}
      100%{opacity:0; transform: translateX(-50%) translateY(-10px);}
    }

    /* BUTTONS */
    .actions{
      display:flex; gap:12px; justify-content:center; flex-wrap:wrap; margin-top: 10px;
    }
    .btn {
      padding: 12px 22px;
      font-size: 1.05rem;
      border: none;
      border-radius: 30px;
      background: linear-gradient(45deg, var(--btn-grad1), var(--btn-grad2));
      color: white;
      cursor: pointer;
      transition: transform 0.25s ease, box-shadow 0.25s ease;
      animation: pulse 2s infinite;
    }
    .btn:hover { transform: translateY(-2px) scale(1.04); box-shadow: 0 10px 24px rgba(0,0,0,0.3); }
    @keyframes pulse {
      0% { transform: scale(1); }
      50% { transform: scale(1.05); }
      100% { transform: scale(1); }
    }
    .btn.secondary{
      background: rgba(255,255,255,0.85);
      color:#222;
      border: 1px solid rgba(0,0,0,0.08);
      animation: none;
    }

    /* SPARKLES AROUND CARD */
    .sparkle {
      position: absolute;
      pointer-events: none;
      width: 6px; height: 6px;
      border-radius: 50%;
      background: radial-gradient(white, rgba(255,255,255,0.1));
      box-shadow: 0 0 10px rgba(255,255,255,0.8), 0 0 18px rgba(255,192,203,0.7);
      animation: twinkle 2.2s ease-in-out infinite;
      z-index: 9;
      filter: drop-shadow(0 0 6px rgba(255,255,255,0.8));
    }
    @keyframes twinkle{
      0%,100%{ opacity: 0.2; transform: scale(0.7);}
      50%{ opacity: 1; transform: scale(1);}
    }

    /* MODAL */
    .modal {
      display: none;
      position: fixed;
      inset: 0;
      background: rgba(0,0,0,0.85);
      justify-content: center;
      align-items: center;
      z-index: 100;
      padding: 16px;
    }
    .modal-content {
      position: relative;
      background: white;
      padding: 18px 18px 26px;
      border-radius: 16px;
      max-width: 96vw;
      width: 900px;
      max-height: 92vh;
      overflow: auto;
      text-align: center;
      animation: fadeIn 0.45s ease-in-out;
      box-shadow: var(--shadow-lg);
    }
    .close {
      position: absolute;
      top: 10px; right: 16px;
      font-size: 2rem;
      color: #222;
      cursor: pointer;
      line-height: 1;
    }

    /* CAROUSEL */
    .carousel {
      display: flex; align-items: center; justify-content: center; gap: 12px; margin-top: 10px;
    }
    .carousel img {
      width: min(86vw, 680px);
      max-height: 70vh;
      object-fit: cover;
      border-radius: 14px;
      box-shadow: 0 12px 30px rgba(0,0,0,0.35);
    }
    .carousel button {
      background: rgba(0,0,0,0.55);
      border: none;
      color: white;
      font-size: 1.9rem;
      padding: 6px 14px;
      cursor: pointer;
      border-radius: 999px;
      transition: background 0.25s;
    }
    .carousel button:hover { background: rgba(0,0,0,0.9); }

    /* POLAROID GALLERY */
    .polaroids{
      position: relative;
      margin: 18px auto 4px;
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(140px, 1fr));
      gap: 16px;
      max-width: 960px;
    }
    .polaroid{
      background: #fff;
      padding: 10px 10px 24px;
      border-radius: 10px;
      box-shadow: 0 16px 28px rgba(0,0,0,0.25);
      transform: rotate(var(--rot, 0deg));
      transition: transform 0.25s ease, box-shadow 0.25s ease;
      position: relative;
    }
    .polaroid:hover{
      transform: rotate(0deg) scale(1.04);
      z-index: 2;
      box-shadow: 0 22px 40px rgba(0,0,0,0.35);
    }
    .polaroid img{
      width: 100%;
      height: 160px;
      object-fit: cover;
      border-radius: 8px;
      display: block;
    }
    .caption{
      margin-top: 8px;
      font-size: .9rem;
      color:#444;
    }
    /* little tape on polaroids */
    .polaroid::before{
      content:"";
      position: absolute;
      top:-10px; left: 50%;
      transform: translateX(-50%) rotate(2deg);
      width: 60px; height: 16px;
      background: rgba(255,255,153,0.85);
      box-shadow: 0 3px 8px rgba(0,0,0,0.15);
      border-radius: 4px;
    }
	
	 /* BUTTONS */
    .actions{
      display:flex; 
      flex-wrap:wrap; 
      justify-content:center; 
      gap:12px; 
      margin-top: 10px;
    }
    .btn {
      padding: 12px 22px;
      font-size: 1.05rem;
      border: none;
      border-radius: 30px;
      background: linear-gradient(45deg, var(--btn-grad1), var(--btn-grad2));
      color: white;
      cursor: pointer;
      transition: transform 0.25s ease, box-shadow 0.25s ease;
      animation: pulse 2s infinite;
    }
    .btn:hover { transform: translateY(-2px) scale(1.04); }
    .btn.secondary{
      background: rgba(255,255,255,0.85);
      color:#222;
      border: 1px solid rgba(0,0,0,0.08);
      animation: none;
    }
	.chat-bubble{
  background:#ffe6f0;
  color:#222;
  padding:10px 14px;
  border-radius:18px;
  max-width:240px;
  margin:auto;
  animation: popIn 0.5s ease;
}
@keyframes popIn { from {transform:scale(0.6); opacity:0;} to {transform:scale(1); opacity:1;} }
	
/* üéÅ Surprise Modal */
.modal {
  display: none; 
  position: fixed;
  z-index: 1000;
  left: 0; top: 0;
  width: 100%; height: 100%;
  background: rgba(0,0,0,0.7);
}
.modal-content {
  background: white;
  margin: 10% auto;
  padding: 25px;
  border-radius: 12px;
  width: 70%;
  max-width: 600px;
  text-align: center;
  box-shadow: 0 5px 15px rgba(0,0,0,0.3);
}
.modal-content h2 { color: #ff3366; }
.close {
  float: right;
  font-size: 24px;
  cursor: pointer;
}
.slides {
  position: relative;
  text-align: center;
}

.slides img {
  border-radius: 12px;
  box-shadow: 0 12px 28px rgba(0,0,0,0.35);
  display: block;
  margin: 0 auto;
  max-width: 90%;
}

/* Yellow tape effect */
.slides img::before {
  content: "";
  position: absolute;
  top: -12px;
  left: 50%;
  transform: translateX(-50%) rotate(3deg);
  width: 70px;
  height: 18px;
  background: rgba(255,255,153,0.9); /* light yellow */
  border-radius: 4px;
  box-shadow: 0 3px 6px rgba(0,0,0,0.2);
}
.carousel p {
  margin-top: 10px;
  font-size: 1.05rem;
  font-weight: 500;
  color: #444;
  text-align: center;
  font-family: "Georgia", serif; /* elegant serif font */
  background: rgba(255, 255, 255, 0.85);
  display: inline-block;
  padding: 6px 14px;
  border-radius: 14px;
  box-shadow: 0 4px 12px rgba(0,0,0,0.15);
  transition: transform 0.25s ease, box-shadow 0.25s ease;
}

.carousel p:hover {
  transform: scale(1.05);
  box-shadow: 0 6px 18px rgba(0,0,0,0.25);
  color: var(--accent); /* matches your theme accent (#e91e63) */
}
.gallery-heading {
  text-align: center;
  font-size: clamp(1.8rem, 3vw, 2.6rem);
  font-family: "Georgia", serif;
  font-weight: bold;
  background: linear-gradient(45deg, #e91e63, #ff9966);
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  margin: 30px auto 20px;
  position: relative;
  display: inline-block;
  animation: fadeIn 1.5s ease;
}

.gallery-heading::after {
  content: "";
  display: block;
  width: 80%;
  height: 3px;
  margin: 6px auto 0;
  background: linear-gradient(90deg, transparent, #e91e63, transparent);
  border-radius: 3px;
  animation: slideIn 1.2s ease;
}

@keyframes slideIn {
  from { width: 0; opacity: 0; }
  to { width: 80%; opacity: 1; }
}
.puzzle {
  width: 300px;
  height: 300px;
  margin: 20px auto;
  display: grid;
  grid-template-columns: repeat(3, 1fr);
  grid-template-rows: repeat(3, 1fr);
  gap: 2px;
  border: 3px solid #e91e63;
  border-radius: 10px;
  box-shadow: 0 8px 20px rgba(0,0,0,0.25);
}

.puzzle-piece {
  width: 100%;
  height: 100%;
  background-image: url("firsttext.jpg");
  background-size: 300px 300px;
  cursor: grab;
  border-radius: 4px;
}

.puzzle-piece.dragging {
  opacity: 0.5;
}



    /* ANIMATIONS + FX */
    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(8px) scale(0.98); }
      to { opacity: 1; transform: translateY(0) scale(1); }
    }

    /* BALLOONS + CONFETTI (your originals, tuned a bit) */
    .balloon {
      position: fixed;
      bottom: -150px;
      width: 60px;
      height: 80px;
      border-radius: 50%;
      background: red;
      animation: float 10s linear infinite;
      z-index: 1;
    }
    @keyframes float {
      0% { transform: translateY(0); opacity: 1; }
      100% { transform: translateY(-115vh); opacity: 0; }
    }
    .confetti {
      position: fixed;
      width: 10px;
      height: 10px;
      background: gold;
      animation: fall 5s linear infinite;
      z-index: 1;
    }
    @keyframes fall {
      0% { transform: translateY(-10px) rotate(0deg); opacity: 1; }
      100% { transform: translateY(110vh) rotate(360deg); opacity: 0; }
    }

    /* RESPONSIVE TWEAKS */
    @media (max-width:560px){
      .polaroid img{ height: 130px; }
      .carousel img{ max-height: 64vh; }
    }
  </style>
</head>
<body>	
  <div class="card" id="mainCard">
    <h1>üéâ ‡§™‡•ç‡§∞‡§ø‡§Ø ‡§¨‡§æ‡§Ø‡§ï‡•ã ‡§§‡•Å‡§≤‡§æ ‡§µ‡§æ‡§¢‡§¶‡§ø‡§µ‡§∏‡§æ‡§ö‡•ç‡§Ø‡§æ ‡§π‡§æ‡§∞‡•ç‡§¶‡§ø‡§ï ‡§∂‡•Å‡§≠‡•á‡§ö‡•ç‡§õ‡§æ ...! üéÇ</h1>
    <p class="lead">Wishing you endless joy, laughter, and happiness today ‚ù§Ô∏è</p>

    <!-- COUNTUP -->
    <div class="countup" id="countup">
      We‚Äôve been together for <strong>0 months, 0 days, 0 hours, 0 mins, 0 secs</strong>
    </div>

    <!-- FLOATING QUOTE -->
    <div class="quote-wrap">
      <div class="quote" id="quoteText">Mazi dipudi tu ‚òï</div>
    </div>
 <!-- Music Player -->
    
    <div class="actions">
      <button class="btn" onclick="openModal()">Memories</button>
      
	  <button class="btn" onclick="openGift()">üéÅ Mazya hya bhavna</button>
	 
<button class="btn" onclick="openPuzzle()">üß© Click to see our first message but  with a twist</button>
	  
</div>
<div id="firstMessageModal" class="modal">
  <div class="modal-content">
    <span class="close" onclick="closeFirstMessage()">&times;</span>
    <!-- First chat screenshot -->
    <img 
      src="firsttext.jpg" 
      alt="Our First Text Screenshot" 
      style="width:100%; max-width:500px; border-radius:12px; box-shadow:0 12px 28px rgba(0,0,0,0.35);"
    >
  </div>
</div>


      
	

<!-- Surprise Modal -->
<div id="giftModal" class="modal">
  <div class="modal-content">
    <span class="close" onclick="closeGift()">&times;</span>
    <h2>üíå My Special Wish for You</h2>
    <p>
      Happy Birthday my love! ‚ù§Ô∏è  
      From the day we met till today, you‚Äôve filled my life with happiness, care, and countless memories.  
      You are my safe place, my joy, and my forever.  
      On this birthday, I just want to remind you that no matter what, I‚Äôll always be by your side.  
      Here‚Äôs to many more memories, smiles, and endless love together. üíï
    </p>
  </div>
</div>
	
    <!-- POLAROID GALLERY -->
  <!-- POLAROID GALLERY -->
<div class="polaroids" id="polaroidGrid">
<h2 class="gallery-heading">‚ú® A Divine Collection of You ‚ú®</h2>
  <div class="polaroid" style="--rot:-6deg">
    <img src="Dipa1.jpg" alt="Dipa 1">
    <div class="caption">‚ù§Ô∏è</div>
  </div>
  <div class="polaroid" style="--rot:4deg">
    <img src="Dipa2.jpg" alt="Dipa 2">
    <div class="caption">‚ù§Ô∏è</div>
  </div>
  <div class="polaroid" style="--rot:-3deg">
    <img src="Dipa3.jpg" alt="Dipa 3">
    <div class="caption">‚ù§Ô∏è</div>
  </div>
  <div class="polaroid" style="--rot:7deg">
    <img src="Dipa4.jpg" alt="Dipa 4">
    <div class="caption">‚ù§Ô∏è</div>
  </div>
  <div class="polaroid" style="--rot:-7deg">
    <img src="Dipa5.jpg" alt="Dipa 5">
    <div class="caption">‚ù§Ô∏è</div>
  </div>
  <div class="polaroid" style="--rot:2deg">
    <img src="Dipa6.jpg" alt="Dipa 6">
    <div class="caption">‚ù§Ô∏è</div>
  </div>
  <div class="polaroid" style="--rot:-10deg">
    <img src="Dipa7.jpg" alt="Dipa 7">
    <div class="caption">‚ù§Ô∏è</div>
  </div>
  <div class="polaroid" style="--rot:5deg">
    <img src="Dipa8.jpg" alt="Dipa 8">
    <div class="caption">‚ù§Ô∏è</div>
  </div>
  <div class="polaroid" style="--rot:-2deg">
    <img src="Dipa9.jpg" alt="Dipa 9">
    <div class="caption">‚ù§Ô∏è</div>
  </div>
  <div class="polaroid" style="--rot:3deg">
    <img src="Dipa10.webp" alt="Dipa 10">
    <div class="caption">‚ù§Ô∏è</div>
  </div>
</div>
<!-- Puzzle Modal -->
<div id="puzzleModal" class="modal">
  <div class="modal-content">
    <span class="close" onclick="closePuzzle()">&times;</span>
    <h2>üß© Solve the Puzzle!</h2>
    <p>Complete the picture to reveal where it started ‚ù§Ô∏è</p>
    <div id="puzzle" class="puzzle"></div>
    <p id="puzzleMessage" style="display:none; font-size:1.2rem; color:#e91e63; margin-top:15px;">
      üéâ You completed it! You complete me too ‚ù§Ô∏è Happy Birthday my Love üéÇüíû
    </p>
  </div>
</div>





  <!-- SPARKLES (auto-generated around card) -->
  <div id="sparkleLayer"></div>

  <!-- MODAL -->
  <div id="memoriesModal" class="modal" aria-hidden="true" role="dialog" aria-label="Our Memories">
    <div class="modal-content">
      <span class="close" onclick="closeModal()" aria-label="Close">&times;</span>
      <h2>‚ú® Our Memories ‚ú®</h2>
      <div class="carousel">
  <button class="prev" onclick="changeSlide(-1)">‚ùÆ</button>

 
  <div class="slides">
    <img src="Pahilibhet.jpg" alt="Memory 1">
    <p>üìç Pune ‚Äì 27 July 2024</p>
  </div>
  
    <div class="slides">
    <img src="sakshgandh.jpg" alt="Memory 2">
    <p>üìç Sakshgandh ‚Äì 26 Aug 2024</p>
  </div>
  
 
  <div class="slides" style="display:none">
    <img src="Thane.jpg" alt="Memory 3">
    <p>üìç Thane Movie Date ‚Äì 19 Oct 2024</p>
  </div>
  
   <div class="slides" style="display:none">
    <img src="vashi.jpg" alt="Memory 4">
    <p>üìç Vashi ‚Äì 14 Dec 2024</p>
  </div>
  
  <div class="slides" style="display:none">
    <img src="favone.jpg" alt="Memory 5">
    <p>üìç Our Favourite ‚Äì 10 May 2025</p>
  </div>
  
   <div class="slides" style="display:none">
    <img src="travel.jpg" alt="Memory 6">
    <p>üìç Our First Travel ‚Äì 14 May 2025</p>
  </div>

  <!-- Slide 4 -->
  <div class="slides" style="display:none">
    <img src="Honeymoon.jpg" alt="Memory 7">
    <p>üìç Alibaug Honeymoon ‚Äì 7 June 2025</p>
  </div>

  <!-- Slide 5 -->
  <div class="slides" style="display:none">
    <img src="TrainJourney.jpg" alt="Memory 8">
    <p>üìç  First Train Journey ‚Äì 7 July 2025</p>
  </div>

  <!-- Slide 6 -->
  <div class="slides" style="display:none">
    <img src="krishnakath.jpg" alt="Memory 9">
    <p>üìç Krishna Kath ‚Äì 12 July 2025</p>
  </div>

  <!-- Slide 7 -->
  <div class="slides" style="display:none">
    <img src="amrutwedding.jpg" alt="Memory 10">
    <p>üìç Amrut‚Äôs Wedding ‚Äì 13 July 2025</p>
  </div>

  <!-- Slide 8 -->
  <div class="slides" style="display:none">
    <img src="manglagaur.jpg" alt="Memory 11">
    <p>üìç Manglagaur ‚Äì 5 Sept 2025</p>
  </div>

  <!-- Slide 9 -->
  

  <button class="next" onclick="changeSlide(1)">‚ùØ</button>
</div>

    </div>
  </div>

  <script>
   
     const relationshipStart = new Date("2024-01-15T00:00:00");

   
    const quotes = [
      "Mazi babddi tu‚ù§Ô∏è",
      "Mazi chabdi tu‚ù§Ô∏è",
      "Maza baal tu‚ù§Ô∏è",
      "Mazi sundari tu‚ù§Ô∏è",
      "Maza jiwan tu‚ù§Ô∏è",
      "Maza shwas tu‚ù§Ô∏è",
      "Maza dhyasss tuüíû",
      "Maza sarwasva tu‚ù§Ô∏èüé∂"
    ];
    const QUOTE_INTERVAL_MS = 3000;

   
    /* =========================
       COUNTUP (months, days, h/m/s)
       ========================= */
    const countupEl = document.getElementById("countup");

    function diffFrom(start, now){
      // months difference
      let months = (now.getFullYear() - start.getFullYear()) * 12 + (now.getMonth() - start.getMonth());
      const monthAdjustedDate = new Date(start.getFullYear(), start.getMonth() + months, start.getDate());
      if (monthAdjustedDate > now) {
        months--;
      }
      const anchor = new Date(start.getFullYear(), start.getMonth() + months, start.getDate(),
                              start.getHours(), start.getMinutes(), start.getSeconds());
      let ms = now - anchor;
      const days = Math.floor(ms / (1000*60*60*24)); ms -= days*(1000*60*60*24);
      const hours = Math.floor(ms / (1000*60*60)); ms -= hours*(1000*60*60);
      const mins = Math.floor(ms / (1000*60)); ms -= mins*(1000*60);
      const secs = Math.floor(ms / 1000);
      return { months, days, hours, mins, secs };
    }
    function renderCountup(){
      const now = new Date();
      const d = diffFrom(relationshipStart, now);
      countupEl.innerHTML = `We‚Äôve been together for <strong>${d.months} months, ${d.days} days, ${d.hours} hours, ${d.mins} mins, ${d.secs} secs</strong>`;
    }
    renderCountup();
    setInterval(renderCountup, 1000);

    /* =========================
       FLOATING QUOTES (every 30s)
       ========================= */
    const quoteEl = document.getElementById("quoteText");
    let qIndex = 0;
    function rotateQuote(){
      qIndex = (qIndex + 1) % quotes.length;
      quoteEl.style.animation = "none"; // restart animation
      void quoteEl.offsetWidth;
      quoteEl.textContent = quotes[qIndex];
      quoteEl.style.animation = "";
    }
    setInterval(rotateQuote, QUOTE_INTERVAL_MS);

    /* =========================
       BALLOONS + CONFETTI
       ========================= */
    function createBalloon() {
      const balloon = document.createElement("div");
      balloon.classList.add("balloon");
      document.body.appendChild(balloon);

      const colors = ["#ff4d6d", "#ffcc00", "#66ccff", "#99ff99", "#ff9966"];
      balloon.style.background = colors[Math.floor(Math.random() * colors.length)];
      balloon.style.left = Math.random() * window.innerWidth + "px";
      balloon.style.animationDuration = (6 + Math.random() * 5) + "s";

      setTimeout(() => balloon.remove(), 11000);
    }
    setInterval(createBalloon, 900);

    function createConfetti() {
      const confetti = document.createElement("div");
      confetti.classList.add("confetti");
      document.body.appendChild(confetti);

      const colors = ["#ff4d6d", "#ffcc00", "#66ccff", "#99ff99", "#ff9966"];
      confetti.style.background = colors[Math.floor(Math.random() * colors.length)];
      confetti.style.left = Math.random() * window.innerWidth + "px";
      confetti.style.animationDuration = (3 + Math.random() * 3) + "s";

      setTimeout(() => confetti.remove(), 5200);
    }
    setInterval(createConfetti, 220);

    /* =========================
       MODAL + CAROUSEL
       ========================= */
    const modal = document.getElementById("memoriesModal");
    let slideIndex = 0;
    let autoPlayTimer = null;

    function showSlide(i){
      const slides = document.getElementsByClassName("slides");
      for (let s=0; s<slides.length; s++) slides[s].style.display = "none";
      slideIndex = (i + slides.length) % slides.length;
      slides[slideIndex].style.display = "block";
    }
  

 function showSlide(i){
  const slides = document.getElementsByClassName("slides");
  for (let s=0; s<slides.length; s++) slides[s].style.display = "none";
  slideIndex = (i + slides.length) % slides.length;
  slides[slideIndex].style.display = "block";
}

function changeSlide(n){ 
  showSlide(slideIndex + n); 
}

function openModal() {
  modal.style.display = "flex";
  modal.setAttribute("aria-hidden", "false");
  showSlide(slideIndex);

  // start carousel auto-play
  autoPlayTimer = setInterval(() => changeSlide(1), 3500);
}

// ‚úÖ Now outside any function
function closeModal(){
  modal.style.display = "none";
  modal.setAttribute("aria-hidden","true");
  if (autoPlayTimer) clearInterval(autoPlayTimer);
}

window.openModal = openModal;
window.closeModal = closeModal;
window.changeSlide = changeSlide;



    /* =========================
       SPARKLES AROUND CARD
       ========================= */
    const sparkleLayer = document.getElementById("sparkleLayer");
    const card = document.getElementById("mainCard");
    function spawnSparkles(){
      const rect = card.getBoundingClientRect();
      for (let i=0;i<18;i++){
        const sp = document.createElement("div");
        sp.className = "sparkle";
        const rX = rect.left + (Math.random()<0.5 ? -12 - Math.random()*24 : rect.width + 12 + Math.random()*24);
        const rY = rect.top + Math.random()*rect.height;
        sp.style.left = `${rX}px`;
        sp.style.top  = `${rY}px`;
        sp.style.animationDelay = `${Math.random()*2}s`;
        sp.style.width = sp.style.height = `${4 + Math.random()*5}px`;
        sparkleLayer.appendChild(sp);
        setTimeout(()=> sp.remove(), 3000);
      }
    }
    setInterval(spawnSparkles, 1600);
    // initial sparkles
    spawnSparkles();

    /* =========================
       POLAROID RANDOMIZATION (small extra natural offset on load)
       ========================= */
    document.querySelectorAll('.polaroid').forEach((el)=>{
      const base = parseFloat(getComputedStyle(el).getPropertyValue('--rot')) || 0;
      const jitter = (Math.random()*4 - 2); // -2..2 deg
      el.style.setProperty('--rot', (base + jitter) + 'deg');
    });
	
	function openGift() {
  document.getElementById("giftModal").style.display = "block";
}
function closeGift() {
  document.getElementById("giftModal").style.display = "none";
}

function openFirstMessage(){ document.getElementById("firstMessageModal").style.display="flex"; }
function closeFirstMessage(){ document.getElementById("firstMessageModal").style.display="none"; }

function openPuzzle(){
  document.getElementById("puzzleModal").style.display = "flex";
  initPuzzle();
}
function closePuzzle(){
  document.getElementById("puzzleModal").style.display = "none";
}

function initPuzzle(){
  const puzzle = document.getElementById("puzzle");
  puzzle.innerHTML = "";
  const size = 3; // 3x3
  let order = [];
  for (let i=0; i<size*size; i++) order.push(i);
  // shuffle
  order.sort(()=> Math.random() - 0.5);

  order.forEach((pos, index)=>{
    const piece = document.createElement("div");
    piece.className = "puzzle-piece";
    piece.setAttribute("draggable", "true");
    piece.dataset.correct = index; // correct index
    piece.dataset.current = pos;   // current shuffled index

    let x = pos % size;
    let y = Math.floor(pos / size);
    piece.style.backgroundPosition = `-${x*100}px -${y*100}px`;

    puzzle.appendChild(piece);
  });

  enableDragAndDrop();
}

function enableDragAndDrop(){
  const pieces = document.querySelectorAll(".puzzle-piece");
  let dragged = null;

  pieces.forEach(piece=>{
    piece.addEventListener("dragstart", e=>{
      dragged = piece;
      piece.classList.add("dragging");
    });
    piece.addEventListener("dragend", e=>{
      piece.classList.remove("dragging");
    });
    piece.addEventListener("dragover", e=>{
      e.preventDefault();
    });
    piece.addEventListener("drop", e=>{
      e.preventDefault();
      if(dragged && dragged !== piece){
        // swap pieces
        const temp = piece.style.backgroundPosition;
        piece.style.backgroundPosition = dragged.style.backgroundPosition;
        dragged.style.backgroundPosition = temp;

        // check solved
        checkPuzzle();
      }
    });
  });
}

function checkPuzzle(){
  const pieces = document.querySelectorAll(".puzzle-piece");
  let solved = true;
  pieces.forEach((piece, index)=>{
    let x = index % 3;
    let y = Math.floor(index / 3);
    let correctPos = `-${x*100}px -${y*100}px`;
    if(piece.style.backgroundPosition !== correctPos){
      solved = false;
    }
  });

  if(solved){
    document.getElementById("puzzleMessage").style.display = "block";
  }
}


  </script>
</body>
</html>
